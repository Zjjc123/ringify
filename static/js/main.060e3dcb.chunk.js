(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(e,t,n){},68:function(e,t){},85:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(25),r=n.n(s),l=(n(31),n(0));function i(){return Object(l.jsx)("div",{className:"container mx-auto",children:Object(l.jsx)("div",{className:"flex justify-center my-12",children:Object(l.jsx)("a",{className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",href:"https://accounts.spotify.com/authorize?client_id=9149f32554f7425bac1191a602bb83e7&response_type=code&redirect_uri=http://localhost:3000&scope=user-follow-read",children:"Login with Spotify"})})})}var o=n(3),u=n(11),d=n.n(u);var f=n(26);function j(e){var t=e.album;return console.log(t.url),Object(l.jsxs)("a",{className:"w-full lg:max-w-full lg:flex my-16 shadow-md ",href:t.url,children:[Object(l.jsx)("img",{className:"lg:w-48 w-full flex-none object-cover rounded-t rounded-l overflow-hidden",alt:t.title,src:t.albumUrl}),Object(l.jsxs)("div",{className:"lg:rounded-r p-4 flex flex-col justify-between leading-normal",children:[Object(l.jsx)("div",{className:"mb-8",children:Object(l.jsx)("div",{className:"text-gray-900 font-bold text-3xl mb-2",children:t.title})}),Object(l.jsx)("div",{className:"flex items-center",children:Object(l.jsxs)("div",{className:"text-2xl",children:[Object(l.jsx)("p",{className:"text-gray-900 leading-none",children:t.artist}),Object(l.jsx)("p",{className:"text-gray-600",children:t.releaseDate})]})})]})]})}var b=new(n.n(f).a)({clientId:"9149f32554f7425bac1191a602bb83e7"});function h(e){var t=function(e){var t=Object(c.useState)(),n=Object(o.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(),l=Object(o.a)(r,2),i=l[0],u=l[1],f=Object(c.useState)(),j=Object(o.a)(f,2),b=j[0],h=j[1];return Object(c.useEffect)((function(){d.a.post("http://localhost:3001/login",{code:e}).then((function(e){s(e.data.accessToken),u(e.data.refreshToken),h(e.data.expiresIn),window.history.pushState({},null,"/")})).catch((function(){window.location="/"}))}),[e]),Object(c.useEffect)((function(){if(i&&b){var e=setInterval((function(){d.a.post("http://localhost:3001/refresh",{refreshToken:i}).then((function(e){s(e.data.accessToken),h(e.data.expiresIn)})).catch((function(){window.location="/"}))}),1e3*(b-60));return function(){return clearInterval(e)}}}),[i,b]),a}(e.code),n=Object(c.useState)(),a=Object(o.a)(n,2),s=a[0],r=a[1];return Object(c.useEffect)((function(){t&&b.setAccessToken(t)}),[t]),Object(c.useEffect)((function(){if(t){var e=[];b.getFollowedArtists({limit:50}).then((function(t){return Promise.all(t.body.artists.items.map((function(t){return b.getArtistAlbums(t.id).then((function(t){t.body.items.forEach((function(t){var n=new Date(t.release_date);(Date.now()-n.getTime())/864e5<30&&e.push(t)}))}))})))})).then((function(){r(e.map((function(e){return{artist:e.artists[0].name,title:e.name,url:e.external_urls.spotify,albumUrl:e.images[0].url,releaseDate:e.release_date}})))}))}}),[t]),Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{className:"text-center text-5xl font-bold pt-16",children:"New Releases"}),Object(l.jsx)("div",{className:"justify-center h-screen w-full px-48 py-8",children:s?s.map((function(e){return Object(l.jsx)(j,{album:e})})):Object(l.jsx)("div",{})})]})}var x=new URLSearchParams(window.location.search).get("code");var m=function(){return x?Object(l.jsx)(h,{code:x}):Object(l.jsx)(i,{})};r.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(m,{})}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.060e3dcb.chunk.js.map